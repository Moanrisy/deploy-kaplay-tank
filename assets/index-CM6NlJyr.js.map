{"version":3,"file":"index-CM6NlJyr.js","sources":["../../src/player.js","../../src/main.js"],"sourcesContent":["export function createPlayer(k) {\n  const player = k.add([\n    k.pos(120, 80), \n    k.sprite(\"bean\"), \n    k.area(),  // Enable collision detection\n    k.body(),  // Enable physics-like movement\n    \"player\", \n    {\n      speed: 7000,  // Adjusted to a reasonable speed\n      dir: k.vec2(0, 0),  // Initial direction\n    }\n  ]);\n\n  // Handle movement using onButtonDown (continuous movement)\n  k.onButtonDown(\"up\", () => {\n    player.move(0, -player.speed * k.dt());\n  });\n\n  k.onButtonDown(\"down\", () => {\n    player.move(0, player.speed * k.dt());\n  });\n\n  k.onButtonDown(\"left\", () => {\n    player.move(-player.speed * k.dt(), 0);\n  });\n\n  k.onButtonDown(\"right\", () => {\n    player.move(player.speed * k.dt(), 0);\n  });\n\n  return player;  // Return player so it can be used in other files\n}\n","import kaplay from \"kaplay\";\r\nimport { createPlayer } from \"./player\";\r\n// import \"kaplay/global\"; // uncomment if you want to use without the k. prefix\r\n\r\nconst k = kaplay({\r\n  width: 1280,\r\n  height: 1024,\r\n  buttons: {\r\n    next: {\r\n      keyboard: \"space\",\r\n      mouse: \"left\",\r\n    },\r\n    up: {\r\n      keyboard: [\"w\", \"up\"],\r\n      gamepad: [\"dpad-up\"] // You can also bind \"leftstick-up\" if supported\r\n    },\r\n    down: {\r\n      keyboard: [\"s\", \"down\"],\r\n      gamepad: [\"dpad-down\"]\r\n    },\r\n    left: {\r\n      keyboard: [\"a\", \"left\"],\r\n      gamepad: [\"dpad-left\"]\r\n    },\r\n    right: {\r\n      keyboard: [\"d\", \"right\"],\r\n      gamepad: [\"dpad-right\"]\r\n    },\r\n    aButton: {\r\n      keyboard: [\"space\"],\r\n      gamepad: [\"south\", \"ltrigger\", \"rtrigger\"]\r\n    }\r\n  }\r\n});\r\n\r\nk.loadRoot(\"./\"); // A good idea for Itch.io publishing later\r\n\r\nvar joystick = nipplejs.create({\r\n  zone: document.getElementById('joystick'),\r\n  mode: 'static',\r\n  position: { left: '20%', top: '50%' },\r\n  color: 'green',\r\n  size: 150\r\n});\r\n\r\n\r\n// !notes\r\n// do not access the varieables as global\r\n// use tag and make local variable\r\n\r\n// loadSprite here\r\nk.loadSprite(\"map\", \"maps/map.png\")\r\nk.loadSprite(\"bean\", \"sprites/bean.png\");\r\n\r\n// !scene\r\nk.scene(\"gameloop\", () => {\r\n\r\n  k.add([\r\n    k.sprite(\"map\"),\r\n    k.pos()\r\n  ])\r\n\r\n  let player = createPlayer(k)\r\n\r\n  let lastDirection = { x: 0, y: 0 };\r\n  let lastForce = 0;\r\n  let isMoving = false;\r\n  let speed = 200;\r\n\r\n\r\n  joystick.on(\"start\", (evt, data) => {\r\n    isMoving = true;\r\n  });\r\n\r\n  joystick.on(\"move\", (evt, data) => {\r\n    let force = data.force; // Get the force value\r\n\r\n    // Cap force to max 1.0 (or 100 if data.force is scaled differently)\r\n    const maxForce = 1.0; // Adjust as needed (100 if force goes up to 100)\r\n    if (force > maxForce) {\r\n      force = maxForce;\r\n    }\r\n\r\n    lastForce = force; // Store the capped force\r\n    const angle = data.angle.radian;\r\n\r\n    lastDirection = {\r\n      x: Math.cos(angle) * lastForce * speed,\r\n      y: -Math.sin(angle) * lastForce * speed\r\n    };\r\n  });\r\n\r\n\r\n  joystick.on(\"end\", (evt, data) => {\r\n    isMoving = false;\r\n    lastForce = 0; // Reset force\r\n    player.move(0, 0); // Stop movement when released\r\n  });\r\n\r\n\r\n  k.onUpdate(() => {\r\n    if (isMoving && lastForce > 0) {\r\n      player.move(lastDirection.x, lastDirection.y);\r\n    }\r\n  });\r\n})\r\n\r\nk.go(\"gameloop\")\r\n"],"names":["createPlayer","k","player","kaplay","joystick","lastDirection","lastForce","isMoving","speed","evt","data","force","maxForce","angle"],"mappings":"+uBAAO,SAASA,EAAaC,EAAG,CAC9B,MAAMC,EAASD,EAAE,IAAI,CACnBA,EAAE,IAAI,IAAK,EAAE,EACbA,EAAE,OAAO,MAAM,EACfA,EAAE,KAAM,EACRA,EAAE,KAAM,EACR,SACA,CACE,MAAO,IACP,IAAKA,EAAE,KAAK,EAAG,CAAC,CACtB,CACA,CAAG,EAGD,OAAAA,EAAE,aAAa,KAAM,IAAM,CACzBC,EAAO,KAAK,EAAG,CAACA,EAAO,MAAQD,EAAE,IAAI,CACzC,CAAG,EAEDA,EAAE,aAAa,OAAQ,IAAM,CAC3BC,EAAO,KAAK,EAAGA,EAAO,MAAQD,EAAE,IAAI,CACxC,CAAG,EAEDA,EAAE,aAAa,OAAQ,IAAM,CAC3BC,EAAO,KAAK,CAACA,EAAO,MAAQD,EAAE,GAAI,EAAE,CAAC,CACzC,CAAG,EAEDA,EAAE,aAAa,QAAS,IAAM,CAC5BC,EAAO,KAAKA,EAAO,MAAQD,EAAE,GAAI,EAAE,CAAC,CACxC,CAAG,EAEMC,CACT,CC3BA,MAAMD,EAAIE,EAAO,CACf,MAAO,KACP,OAAQ,KACR,QAAS,CACP,KAAM,CACJ,SAAU,QACV,MAAO,MACR,EACD,GAAI,CACF,SAAU,CAAC,IAAK,IAAI,EACpB,QAAS,CAAC,SAAS,CACpB,EACD,KAAM,CACJ,SAAU,CAAC,IAAK,MAAM,EACtB,QAAS,CAAC,WAAW,CACtB,EACD,KAAM,CACJ,SAAU,CAAC,IAAK,MAAM,EACtB,QAAS,CAAC,WAAW,CACtB,EACD,MAAO,CACL,SAAU,CAAC,IAAK,OAAO,EACvB,QAAS,CAAC,YAAY,CACvB,EACD,QAAS,CACP,SAAU,CAAC,OAAO,EAClB,QAAS,CAAC,QAAS,WAAY,UAAU,CAC1C,CACF,CACH,CAAC,EAEDF,EAAE,SAAS,IAAI,EAEf,IAAIG,EAAW,SAAS,OAAO,CAC7B,KAAM,SAAS,eAAe,UAAU,EACxC,KAAM,SACN,SAAU,CAAE,KAAM,MAAO,IAAK,KAAO,EACrC,MAAO,QACP,KAAM,GACR,CAAC,EAQDH,EAAE,WAAW,MAAO,cAAc,EAClCA,EAAE,WAAW,OAAQ,kBAAkB,EAGvCA,EAAE,MAAM,WAAY,IAAM,CAExBA,EAAE,IAAI,CACJA,EAAE,OAAO,KAAK,EACdA,EAAE,IAAK,CACX,CAAG,EAED,IAAIC,EAASF,EAAaC,CAAC,EAEvBI,EAAgB,CAAE,EAAG,EAAG,EAAG,CAAC,EAC5BC,EAAY,EACZC,EAAW,GACXC,EAAQ,IAGZJ,EAAS,GAAG,QAAS,CAACK,EAAKC,IAAS,CAClCH,EAAW,EACf,CAAG,EAEDH,EAAS,GAAG,OAAQ,CAACK,EAAKC,IAAS,CACjC,IAAIC,EAAQD,EAAK,MAGjB,MAAME,EAAW,EACbD,EAAQC,IACVD,EAAQC,GAGVN,EAAYK,EACZ,MAAME,EAAQH,EAAK,MAAM,OAEzBL,EAAgB,CACd,EAAG,KAAK,IAAIQ,CAAK,EAAIP,EAAYE,EACjC,EAAG,CAAC,KAAK,IAAIK,CAAK,EAAIP,EAAYE,CACxC,CACA,CAAG,EAGDJ,EAAS,GAAG,MAAO,CAACK,EAAKC,IAAS,CAChCH,EAAW,GACXD,EAAY,EACZJ,EAAO,KAAK,EAAG,CAAC,CACpB,CAAG,EAGDD,EAAE,SAAS,IAAM,CACXM,GAAYD,EAAY,GAC1BJ,EAAO,KAAKG,EAAc,EAAGA,EAAc,CAAC,CAElD,CAAG,CACH,CAAC,EAEDJ,EAAE,GAAG,UAAU"}